<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>scripts&#x2F;lu.js - The Lu Component API</title>
    <link rel="stylesheet" href="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;3.7.0&#x2F;build&#x2F;cssgrids&#x2F;cssgrids-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="..&#x2F;assets/favicon.png">
    <script src="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;combo?3.7.0&#x2F;build&#x2F;yui&#x2F;yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="http:&#x2F;&#x2F;use.lu&#x2F;images&#x2F;logo.png" title="The Lu Component API"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 0.3.x</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="..&#x2F;classes/aboveDecorator.html">aboveDecorator</a></li>
            
                <li><a href="..&#x2F;classes/Abstract.html">Abstract</a></li>
            
                <li><a href="..&#x2F;classes/belowDecorator.html">belowDecorator</a></li>
            
                <li><a href="..&#x2F;classes/Button.html">Button</a></li>
            
                <li><a href="..&#x2F;classes/Carousel.html">Carousel</a></li>
            
                <li><a href="..&#x2F;classes/Container.html">Container</a></li>
            
                <li><a href="..&#x2F;classes/DefaultDecorator.html">DefaultDecorator</a></li>
            
                <li><a href="..&#x2F;classes/Dropdown.html">Dropdown</a></li>
            
                <li><a href="..&#x2F;classes/firstDecorator.html">firstDecorator</a></li>
            
                <li><a href="..&#x2F;classes/FormElement.html">FormElement</a></li>
            
                <li><a href="..&#x2F;classes/genericStateDecorator.html">genericStateDecorator</a></li>
            
                <li><a href="..&#x2F;classes/lastDecorator.html">lastDecorator</a></li>
            
                <li><a href="..&#x2F;classes/leftDecorator.html">leftDecorator</a></li>
            
                <li><a href="..&#x2F;classes/List.html">List</a></li>
            
                <li><a href="..&#x2F;classes/loadDecorator.html">loadDecorator</a></li>
            
                <li><a href="..&#x2F;classes/Lu.html">Lu</a></li>
            
                <li><a href="..&#x2F;classes/Mapper.html">Mapper</a></li>
            
                <li><a href="..&#x2F;classes/nextDecorator.html">nextDecorator</a></li>
            
                <li><a href="..&#x2F;classes/pauseDecorator.html">pauseDecorator</a></li>
            
                <li><a href="..&#x2F;classes/Placeholder.html">Placeholder</a></li>
            
                <li><a href="..&#x2F;classes/playDecorator.html">playDecorator</a></li>
            
                <li><a href="..&#x2F;classes/previousDecorator.html">previousDecorator</a></li>
            
                <li><a href="..&#x2F;classes/rightDecorator.html">rightDecorator</a></li>
            
                <li><a href="..&#x2F;classes/selectDecorator.html">selectDecorator</a></li>
            
                <li><a href="..&#x2F;classes/stateDecorator.html">stateDecorator</a></li>
            
                <li><a href="..&#x2F;classes/Switch.html">Switch</a></li>
            
                <li><a href="..&#x2F;classes/Tip.html">Tip</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="..&#x2F;modules/Button.html">Button</a></li>
            
                <li><a href="..&#x2F;modules/Lu.html">Lu</a></li>
            
                <li><a href="..&#x2F;modules/Tip.html">Tip</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: scripts&#x2F;lu.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
&#x2F;**
 * module Lu
 *&#x2F;

&#x2F;**
 * Lu&#x27;s main class
 * @class Lu
 * @constructor
 * @require inject
 * @param {Object} settings Configuration properties for this instance
 *&#x2F;
var Lu = function(){
  var self = this;

  this.$mapped = $( [] );
  this.map = function( $element, component, callback ){
    var mapped = [];

    _.each( $element, function( item, index ){
      var $element = $( item ),
        componentData,
        deferral,
        settings,
        configuration = item.getAttribute( &#x27;data-lu-config&#x27; ),
        key;

      componentData = $element.lu( &#x27;getComponents&#x27; );

      if( !$element.data( &#x27;mapped&#x27; ) ){
        $element.data( &#x27;mapped&#x27;, true );
        mapped.push( item );
      }

      if( !componentData[component] ){
        deferral = $.Deferred();
        componentData[component] = {
          deferral: deferral,
          ready: deferral.then,
          settings: {}
        };
      } else {
        _.extend( componentData[component].settings, {} );
      }

      if( callback ){
        callback.call( componentData[component], $element );
      }

      key = componentData[component].key || component;

      if( configuration ){
        try {
          configuration = ( function(){ return eval( &#x27;( function(){ return &#x27; + configuration + &#x27;; }() );&#x27; ); }()[key] || {} );
        } catch( e ){
          configuration = {};
        }
      } else {
        configuration = {};
      }

      componentData[component].settings = _.extend( componentData[component].settings, configuration );
    } );

    this.$mapped = this.$mapped.add( mapped );
  };

  &#x2F;**
   * Loads and instantiates components.
   * @public
   * @static
   * @method execute
   * @param {Object} $element a jQuery collection
   * @return {Object} The executed element (allows chaining)
   *&#x2F;
  this.execute = function( $element ){
    var $nodes = $element.find( this.$mapped ),
      deferral = $.Deferred(),
      requirements = [],
      count;

    if( $element.data( &#x27;mapped&#x27; ) ){
      $nodes = $nodes.add( $element );
    }

    count = $nodes.length;

    &#x2F;**
     * Instantiates a control with selected element.
     * @method execute
     * @private
     * @param {Array} $node A jQuery collection with the selected elements.
     * @param {String} key The name of the Control.
     * @param {Function} Control The Control&#x27;s constructor.
     * @return {Void}
     *&#x2F;
    function execute( $element ){
      var components = $element.lu( &#x27;getComponents&#x27; );

      &#x2F;&#x2F;no components were found so there is nothing to do
      if( components.length === 0 ){
        deferral.resolve();
      }
      _.each( components, function( component, key ){
        var requirement = &#x27;lu&#x2F;&#x27; + key,
          settings = component.settings;

        if( _.indexOf( requirements, requirement ) === -1 ){
          requirements.push( requirement );
        }

        count -= 1;

        deferral.then( function( required, module, exports ){
          var Component = require( requirement ),
            dependenciesResolved = false;

          if( component.hasDependencies ){
            $element.one( &#x27;lu:dependencies-resolved&#x27;, function( event, instance ){
              event.stopPropagation();
              dependenciesResolved = true;
            } );
          }

          component.instance = new Component( $element, settings );

          if( dependenciesResolved ){
            component.deferral.resolve( component.instance );
          } else if( !dependenciesResolved &amp;&amp; component.hasDependencies ){
            component.instance.one( &#x27;dependencies-resolved&#x27;, function( event, instance ){
              event.stopPropagation();
              component.deferral.resolve( component.instance );
            } );
          } else {
            component.deferral.resolve( component.instance );
          }

        } );

        if( count === 0 ){
          require.ensure( requirements, function( required, module, exports ){
            deferral.resolve( required, module, exports );
          } );
        }

      } );
    }
    _.each( $nodes, function( item, index ){
      execute( $( item ) );
    } );

    return deferral;
  };
};

Lu = window.Lu = new Lu();

&#x2F;**
 * Returns a components object containing all components mapped to a node.
 * Available through $.lu jQuery plug-in.
 * @method getComponents
 * @private
 * @static
 * @param {Object} $element a jQuery collection
 * @return {Object} The Lu components associated with the given element
 *&#x2F;
function getComponents( $element ){
  var components = &#x27;components&#x27;;
  if( $element.length &gt; 0 ){
    return $element.data( components ) || $element.data( components, {} ).data( components );
  } else {
    return {};
  }
}

&#x2F;**
 * Returns a component.
 * Available through $.lu jQuery plug-in.
 * @method getComponents
 * @private
 * @static
 * @param {Object} $element a jQuery collection
 * @param {String} $element the components key
 * @return {Object} The Lu component associated with the given element
 *&#x2F;
function getComponent( $element, key ){
  var components = $element.lu( &#x27;getComponents&#x27; );
  return components[key];
}

&#x2F;**
 * Gets the mapped parents of the passed in $element.
 * Available through $.lu jQuery plug-in.
 * @method getParents
 * @public
 * @static
 * @param {Object} $element a jQuery collection
 * @return {Object} A jQuery collection representing the parents
 *&#x2F;
function getParents( $element ){
  return $element.parents().filter( Lu.$mapped );
}

&#x2F;**
 * Gets the mapped descendants of the passed in $element. Available through $.lu jQuery plug-in.
 * @method getDescendants
 * @public
 * @static
 * @param {Object} $element a jQuery collection
 * @return {Object} A Jquery collection of the descendants
 *&#x2F;
function getDescendants( $element ){
  return $element.find( Lu.$mapped );
}

&#x2F;**
 * Gets the mapped children of the passed in $element. Available through $.lu jQuery plug-in.
 * @method getChildren
 * @public
 * @static
 * @param {Object} $element a jQuery collection
 * @return {Object} A jQuery collection of the children
 *&#x2F;
function getChildren( $element ){
  return $element.children( Lu.$mapped );
}

&#x2F;**
 * Add an $observer to an $element. Observers are added in $.data as $observers.
 * Available through $.lu jQuery plug-in.
 * @public
 * @static
 * @method observe
 * @param {Object} $element a jQuery collection
 * @param {Object} $observer a jQuery collection
 * @return {Object} The target element (allows chaining)
 *&#x2F;
function observe( $element, $observer ){
  var $observers = $element.data( &#x27;$observers&#x27; );

  if( !$observers ){
    return $element.data( &#x27;$observers&#x27;, $observer );
  }

  $observers = $observers.add( $observer.not( $observers ) );
  $element.data( &#x27;$observers&#x27;, $observers );

  return $element;
}

&#x2F;**
 * Remove an observer from an $element. Available through $.lu jQuery plug-in.
 * @public
 * @static
 * @method unobserve
 * @param {Object} $element a jQuery collection
 * @param {Object} $observer a jQuery collection
 * @return {Object} The target element (allows chaining)
 *&#x2F;
function unobserve( $element, $observer ){
  var $observers = $element.data( &#x27;$observers&#x27; );

  if( $observers ){
    $observers = $observers.not( $observer );
  }

  $element.data( &#x27;$observers&#x27;, $observers );

  return $element;
}

&#x2F;**
 * Notifies observers of events. Available through $.lu jQuery plug-in.
 * @public
 * @static
 * @method notify
 * @param {Object} $element a jQuery collection
 * @param {string} event the event type
 * @param {Array} $element extra arguments associated with the event
 * @return {Object} The target element (allows chaining)
 *&#x2F;
function notify( $element, event, parameters ){
  var $observers = $element.data( &#x27;$observers&#x27; );

  if( $observers ){
    _.each( $observers, function( observer, index ){
      var $observer = $( observer ),
        components = $observer.lu( &#x27;getComponents&#x27; ),
        deferrals = [];
      _.each( components, function( component, key ){
        var deferral = component.deferral;
        deferral.then( function(){
          var instance = component.instance;
          if( _.indexOf( instance.events(), event ) &gt; -1 ){
            instance.trigger.call( instance, new $.Event( event, { target: $element } ), parameters );
          }
        } );

      } );

    } );
  }
  return $element;
}

( function( $ ){
  &#x2F;&#x2F;Bind utility methods to jQuery as a plug-in
  $.fn.lu = function(){
    var $this = $( this ),
      parameters = Array.prototype.slice.call( arguments ),
      method = parameters[0],
      retrn;

    parameters[0] = $this;

    switch( method ){
      case &#x27;observe&#x27;:
        retrn = observe.apply( $this, parameters );
        break;
      case &#x27;unobserve&#x27;:
        retrn = unobserve.apply( $this, parameters );
        break;
      case &#x27;notify&#x27;:
        retrn = notify.apply( $this, parameters );
        break;
      case &#x27;getComponents&#x27;:
        retrn = getComponents.apply( $this, parameters );
        break;
     case &#x27;getComponent&#x27;:
        retrn = getComponent.apply( $this, parameters );
        break;
      case &#x27;getParents&#x27;:
        retrn = getParents.apply( $this, parameters );
        break;
      case &#x27;getDescendants&#x27;:
        retrn = getDescendants.apply( $this, parameters );
        break;
      case &#x27;getChildren&#x27;:
        retrn = getChildren.apply( $this, parameters );
        break;
      default:
        throw new Error( &#x27;No such method.&#x27; );
    }

    return retrn;
  };
}( window.jQuery ) );


&#x2F;&#x2F;Export to Common JS Loader
if( typeof module !== &#x27;undefined&#x27; ){
  if( typeof module.setExports === &#x27;function&#x27; ){
    module.setExports( Lu );
  } else if( module.exports ){
    module.exports = Lu;
  }
}

&#x2F;&#x2F;Don&#x27;t do Gilligan&#x27;s Island if you want to be a serious actress!
    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="..&#x2F;assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="..&#x2F;assets/js/yui-prettify.js"></script>
<script src="..&#x2F;assets/../api.js"></script>
<script src="..&#x2F;assets/js/api-filter.js"></script>
<script src="..&#x2F;assets/js/api-list.js"></script>
<script src="..&#x2F;assets/js/api-search.js"></script>
<script src="..&#x2F;assets/js/apidocs.js"></script>
</body>
</html>
