<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>scripts&#x2F;components&#x2F;List.js - The Lu Component API</title>
    <link rel="stylesheet" href="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;3.7.0&#x2F;build&#x2F;cssgrids&#x2F;cssgrids-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="..&#x2F;assets/favicon.png">
    <script src="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;combo?3.7.0&#x2F;build&#x2F;yui&#x2F;yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="http:&#x2F;&#x2F;use.lu&#x2F;images&#x2F;logo.png" title="The Lu Component API"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 0.3.x</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="..&#x2F;classes/aboveDecorator.html">aboveDecorator</a></li>
            
                <li><a href="..&#x2F;classes/Abstract.html">Abstract</a></li>
            
                <li><a href="..&#x2F;classes/belowDecorator.html">belowDecorator</a></li>
            
                <li><a href="..&#x2F;classes/Button.html">Button</a></li>
            
                <li><a href="..&#x2F;classes/Carousel.html">Carousel</a></li>
            
                <li><a href="..&#x2F;classes/Container.html">Container</a></li>
            
                <li><a href="..&#x2F;classes/DefaultDecorator.html">DefaultDecorator</a></li>
            
                <li><a href="..&#x2F;classes/Dropdown.html">Dropdown</a></li>
            
                <li><a href="..&#x2F;classes/firstDecorator.html">firstDecorator</a></li>
            
                <li><a href="..&#x2F;classes/FormElement.html">FormElement</a></li>
            
                <li><a href="..&#x2F;classes/genericStateDecorator.html">genericStateDecorator</a></li>
            
                <li><a href="..&#x2F;classes/lastDecorator.html">lastDecorator</a></li>
            
                <li><a href="..&#x2F;classes/leftDecorator.html">leftDecorator</a></li>
            
                <li><a href="..&#x2F;classes/List.html">List</a></li>
            
                <li><a href="..&#x2F;classes/loadDecorator.html">loadDecorator</a></li>
            
                <li><a href="..&#x2F;classes/Lu.html">Lu</a></li>
            
                <li><a href="..&#x2F;classes/Mapper.html">Mapper</a></li>
            
                <li><a href="..&#x2F;classes/nextDecorator.html">nextDecorator</a></li>
            
                <li><a href="..&#x2F;classes/pauseDecorator.html">pauseDecorator</a></li>
            
                <li><a href="..&#x2F;classes/Placeholder.html">Placeholder</a></li>
            
                <li><a href="..&#x2F;classes/playDecorator.html">playDecorator</a></li>
            
                <li><a href="..&#x2F;classes/previousDecorator.html">previousDecorator</a></li>
            
                <li><a href="..&#x2F;classes/rightDecorator.html">rightDecorator</a></li>
            
                <li><a href="..&#x2F;classes/selectDecorator.html">selectDecorator</a></li>
            
                <li><a href="..&#x2F;classes/stateDecorator.html">stateDecorator</a></li>
            
                <li><a href="..&#x2F;classes/Switch.html">Switch</a></li>
            
                <li><a href="..&#x2F;classes/Tip.html">Tip</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="..&#x2F;modules/Button.html">Button</a></li>
            
                <li><a href="..&#x2F;modules/Lu.html">Lu</a></li>
            
                <li><a href="..&#x2F;modules/Tip.html">Tip</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: scripts&#x2F;components&#x2F;List.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
&#x2F;**
 * Manages a list of Containers.
 * @class List
 * @extends Switch
 *&#x2F;

var constants = require( &#x27;lu&#x2F;constants&#x27; ),
  helpers = require( &#x27;lu&#x2F;helpers&#x27; ),
  Switch = require( &#x27;lu&#x2F;Switch&#x27; ),
  Fiber = require( &#x27;Fiber&#x27; ),
  List;

List = Switch.extend( function( base ){

  var SELECTED = constants.statePrefix + constants.states.SELECTED,
    LIST_TAGS = &#x27;ul, ol, dl&#x27;,

    defaults = {
      index: undefined
    },

    root = &#x27;lu&#x2F;List&#x2F;decorators&#x2F;&#x27;,

    decorators = {
      viewport: root + &#x27;viewport&#x27;
    };

  return {
    &#x2F;**
     * @constructor
     * @method init
     * @public
     * @param {Object} $element JQuery object for the element wrapped by the component
     * @param {Object} settings Configuration settings
     *&#x2F;
    init: function( $element, settings ){
      var self = this,
        Selected,
        $selected,
        Previous,
        $items,
        index,
        requirements = [];

      _.defaults( settings, defaults );

      base.init.call( this, $element, settings );

      if (settings.viewport) {
        requirements.push(decorators.viewport);
      }

      require.ensure( requirements, function( require, module, exports ){
        _.each( requirements, function( decorator, index ){
          decorator = require( decorator )( settings );
          Fiber.decorate( self, decorator );
        } );
        self.trigger( &#x27;dependencies-resolved&#x27; );
      } );

      &#x2F;**
       * gets the 0 based index of the selected item.
       * @method index
       * @public
       * @return {Number} index
       *&#x2F;
      this.index = function(){
        return index;
      };

      &#x2F;**
       * Gets the selectable items
       * @public
       * @return {Object} a JQuery object-reference to the items
       *&#x2F;
      this.items = function(){
        var $items;

        if( settings.items ){
          if( typeof settings.items === &#x27;string&#x27; ){
            $items = $element.find( settings.items );
          } else {
            $items = settings.items;
          }
        } else {
          if( $element.is( LIST_TAGS ) ){
            $items = $element.children();
          } else {
            $items = $element.children( LIST_TAGS ).first().children();
          }
        }

        if( !$items ){
          $items = $element.children();
        }

        return $items;
      };

      &#x2F;**
       * Returns the currently-selected Container.
       * @method current
       * @public
       * @return {Object} JQuery object-reference to the selected item
       *&#x2F;
      this.current = function(){
        return Selected;
      };

      &#x2F;**
       * Select an item in the list
       * @method select
       * @public
       * @param {Integer|String|Object} item The index of the item to
       * select, a css selector, or a JQuery collection containing the item.
       * @return {Object} self
       *&#x2F;
      this.select = function( item ){
        var component,
          componentData,
          $item,
          idx;

        &#x2F;&#x2F;return if no item was passed in.
        if( item === undefined ){
          return this;
        }

        &#x2F;&#x2F;try to determine the index of the item being selected
        idx = ( typeof item === &#x27;number&#x27; ) ? item : undefined;

        &#x2F;&#x2F;Figure out what to select based on the param passed in.
        if( typeof item === &#x27;number&#x27; &amp;&amp; item &lt;= this.size() - 1 ){
          $item = this.$items.eq( item );
        } else if( typeof item === &#x27;string&#x27; ){
          $item = this.$items.filter( item );
          $item = ( $item.size() === 1 ) ? $item : undefined;
        } else if( item instanceof $ &amp;&amp; item.size() === 1 ){
          if( item.is( this.$items ) ){
            $item = item;
          }
        }

        &#x2F;&#x2F;We could not determine which item to select so...
        if( $item === undefined ){
          this.trigger( constants.events.OUT_OF_BOUNDS, [this] );
          return this;
        }

        &#x2F;&#x2F;Get the index of the item to be selected if we don&#x27;t have it from above
        if( idx === undefined ) {
          idx = this.$items.index( $item );
        }

        if( idx &gt; this.index() ){
          this.addState( constants.states.FORWARD ).removeState( constants.states.REVERSE );
        } else if( idx &lt; this.index() ){
          this.addState( constants.states.REVERSE ).removeState( constants.states.FORWARD );
        }

        _.each( $item.lu( &#x27;getComponents&#x27; ), function( comp, key ){
          var instance;
          if( !component ){
            instance = comp.instance;
            if( instance ){
              if( typeof instance.removeState === &#x27;function&#x27; &amp;&amp; typeof instance.addState === &#x27;function&#x27; ){
                component = comp;
              }
            }
          }
        } );

        &#x2F;&#x2F;an acceptable component was not found.
        if( !component ){
          Lu.map( $item, &#x27;Switch&#x27;, function(){} );
          Lu.execute( $item );
          component = $item.lu( &#x27;getComponents&#x27; ).Switch;
        }


        &#x2F;&#x2F;Once the item is fully instantiated, select it.
        component.deferral.then( function( Switch ){
          var current = self.current();

          &#x2F;&#x2F;If there is a currently selected item remove the selected state
          if( current ){
            current.removeState( constants.states.SELECTED );
          } else {
            self.$items.filter( &#x27;.&#x27; + SELECTED ).not( Switch.$element ).removeClass( SELECTED );
          }

          Selected = Switch;
          index = idx;
          Selected.addState( constants.states.SELECTED );
          self.trigger( constants.events.SELECTED, [self] );
        } );

        return this;
      };

      this.$items = this.items();

      index = settings.index;
      if( index === undefined ){
        $selected = this.$items.filter(&#x27;.&#x27; + SELECTED );
        index = this.$items.index( $selected );
        if( index === -1 ){
          index = 0;
        }
      }

      &#x2F;&#x2F;Automatically select an item during init
      self.select( index );

      this.on( constants.events.SELECT, function( event, component ){
        event.stopPropagation();

        var $element = component.$element,
          controls = $element.attr( &#x27;aria-controls&#x27; ),
          href,
          $item;

        if( !controls ){
          href = $element.attr( &#x27;href&#x27; );
          if( href ){
            controls = helpers.parseUri( href ).anchor;
          }
        }

        if( controls ){
          $item = $( &#x27;#&#x27; + controls );
          if( $item.is( self.$items ) ){
            self.select( $item );
          } else {
            self.select( component.$element.closest( self.$items ) );
          }
        } else {
          self.select( component.$element.closest( self.$items ) );
        }
      } );

      this.on( constants.events.NEXT, function( event ){
        event.stopPropagation();
        self.next();
      } );

      this.on( constants.events.PREVIOUS, function( event ){
        event.stopPropagation();
        self.previous();
      } );

      this.on( constants.events.FIRST, function( event ){
        event.stopPropagation();
        self.first();
      } );

      this.on( constants.events.LAST, function( event ){
        event.stopPropagation();
        self.last();
      } );

      this.on( constants.events.STATED, function( event, component ){
        event.stopPropagation();
        var current;

        if( !component.$element.is( self.$items ) ){
          return;
        }

        current = self.current();

        if( current ){
          if( component.$element.is( current.$element ) ){
            return;
          }
        }

        if( component.hasState ){
          if( component.hasState( constants.states.SELECTED ) ){
            self.select( component.$element );
          }
        }
      } );

    },

    &#x2F;**
     * adds a new item to $element
     * @method append
     * @public
     * @param {Array} A jQuery Collection of $items to append
     * @return {Object} self
     *&#x2F;
    add: function( $item ){
      this.$items.parent().append( $item );
      this.$items = this.items();
      return this;
    },

    &#x2F;**
     * Removes an item from $element
     * @method remove
     * @public
     * @param {Array} A jQuery Collection of $items to remove
     * @return {Object} self
     *&#x2F;
    remove: function( $item ){
      $( $( $item ), this.$items ).remove();
      this.$items = this.items();
      return this;
    },
    &#x2F;**
     * Selects the next item in the list.
     * @method next
     * @public
     * @return {Object} self
     *&#x2F;
    next: function(){
      if( this.hasNext() ){
        this.select( this.index() + 1 );
      } else {
        this.trigger( constants.events.OUT_OF_BOUNDS, [this] );
      }
      return this;
    },
    &#x2F;**
     * Selects the previous item in the list.
     * @method previous
     * @public
     * @return {Object} self
     *&#x2F;
    previous: function(){
      if( this.hasPrevious() ){
        this.select( this.index() - 1 );
      } else {
        this.trigger( constants.events.OUT_OF_BOUNDS, [this] );
      }
      return this;
    },
    &#x2F;**
     * Selects the last item in the list.
     * @method last
     * @public
     * @return {Object} self
     *&#x2F;
    last: function(){
      this.select( this.$items.eq( this.size() - 1 ) );
      return this;
    },
    &#x2F;**
     * Selects the first item in the list.
     * @method first
     * @public
     * @return {Object} self
     *&#x2F;
    first: function(){
      this.select( 0 );
      return this;
    },
    &#x2F;**
     * Determines if there are any higher-index items in the list.
     * @method hasNext
     * @public
     * @return {Boolean} true if not at the last item in the list
     *&#x2F;
    hasNext: function(){
      return ( this.index() &lt; this.size() - 1 );
    },
    &#x2F;**
     * Determines if there are any lower-index items in the list.
     * @method hasPrevious
     * @public
     * @return {Boolean} true if not at the first item in the list
     *&#x2F;
    hasPrevious: function(){
      return ( this.index() &gt; 0 );
    },
    &#x2F;**
     * Returns the number of items in the list.
     * @method size
     * @public
     * @return {Number} The number of items in the list
     *&#x2F;
    size: function(){
      return this.$items.size();
    }
  };
} );

if( typeof module !== &#x27;undefined&#x27; ){
  if( typeof module.setExports === &#x27;function&#x27; ){
    module.setExports( List );
  } else if( module.exports ){
   module.exports = List;
  }
}

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="..&#x2F;assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="..&#x2F;assets/js/yui-prettify.js"></script>
<script src="..&#x2F;assets/../api.js"></script>
<script src="..&#x2F;assets/js/api-filter.js"></script>
<script src="..&#x2F;assets/js/api-list.js"></script>
<script src="..&#x2F;assets/js/api-search.js"></script>
<script src="..&#x2F;assets/js/apidocs.js"></script>
</body>
</html>
