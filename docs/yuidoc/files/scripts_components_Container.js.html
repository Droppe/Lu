<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>scripts&#x2F;components&#x2F;Container.js - The Lu Component API</title>
    <link rel="stylesheet" href="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;3.7.0&#x2F;build&#x2F;cssgrids&#x2F;cssgrids-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="..&#x2F;assets/favicon.png">
    <script src="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;combo?3.7.0&#x2F;build&#x2F;yui&#x2F;yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="http:&#x2F;&#x2F;use.lu&#x2F;images&#x2F;logo.png" title="The Lu Component API"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 0.3.x</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="..&#x2F;classes/aboveDecorator.html">aboveDecorator</a></li>
            
                <li><a href="..&#x2F;classes/Abstract.html">Abstract</a></li>
            
                <li><a href="..&#x2F;classes/belowDecorator.html">belowDecorator</a></li>
            
                <li><a href="..&#x2F;classes/Button.html">Button</a></li>
            
                <li><a href="..&#x2F;classes/Carousel.html">Carousel</a></li>
            
                <li><a href="..&#x2F;classes/Container.html">Container</a></li>
            
                <li><a href="..&#x2F;classes/DefaultDecorator.html">DefaultDecorator</a></li>
            
                <li><a href="..&#x2F;classes/Dropdown.html">Dropdown</a></li>
            
                <li><a href="..&#x2F;classes/firstDecorator.html">firstDecorator</a></li>
            
                <li><a href="..&#x2F;classes/FormElement.html">FormElement</a></li>
            
                <li><a href="..&#x2F;classes/genericStateDecorator.html">genericStateDecorator</a></li>
            
                <li><a href="..&#x2F;classes/lastDecorator.html">lastDecorator</a></li>
            
                <li><a href="..&#x2F;classes/leftDecorator.html">leftDecorator</a></li>
            
                <li><a href="..&#x2F;classes/List.html">List</a></li>
            
                <li><a href="..&#x2F;classes/loadDecorator.html">loadDecorator</a></li>
            
                <li><a href="..&#x2F;classes/Lu.html">Lu</a></li>
            
                <li><a href="..&#x2F;classes/Mapper.html">Mapper</a></li>
            
                <li><a href="..&#x2F;classes/nextDecorator.html">nextDecorator</a></li>
            
                <li><a href="..&#x2F;classes/pauseDecorator.html">pauseDecorator</a></li>
            
                <li><a href="..&#x2F;classes/Placeholder.html">Placeholder</a></li>
            
                <li><a href="..&#x2F;classes/playDecorator.html">playDecorator</a></li>
            
                <li><a href="..&#x2F;classes/previousDecorator.html">previousDecorator</a></li>
            
                <li><a href="..&#x2F;classes/rightDecorator.html">rightDecorator</a></li>
            
                <li><a href="..&#x2F;classes/selectDecorator.html">selectDecorator</a></li>
            
                <li><a href="..&#x2F;classes/stateDecorator.html">stateDecorator</a></li>
            
                <li><a href="..&#x2F;classes/Switch.html">Switch</a></li>
            
                <li><a href="..&#x2F;classes/Tip.html">Tip</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="..&#x2F;modules/Button.html">Button</a></li>
            
                <li><a href="..&#x2F;modules/Lu.html">Lu</a></li>
            
                <li><a href="..&#x2F;modules/Tip.html">Tip</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: scripts&#x2F;components&#x2F;Container.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
var constants = require( &#x27;lu&#x2F;constants&#x27; ),
  helpers = require( &#x27;lu&#x2F;helpers&#x27; ),
  Switch = require( &#x27;lu&#x2F;Switch&#x27; ),
  Container;

&#x2F;**
* Contains content and maintains state
* @class Container
* @constructor
* @extends Switch
* @version 0.2.4
*&#x2F;

Container = Switch.extend( function ( base ) {
  &#x2F;**
   * Default configuration values
   * @property defaults
   * @type Object
   * @private
   * @final
   *&#x2F;
  var defaults = {
    &#x2F;**
     * The default state or states to be applied to the Container.
     * This can be an Array of strings or comma-delimited string
     * representing multiple states.
     * It can also be a string representing a single state
     * @property states
     * @type {String|Array}
     * @default null
     *&#x2F;
    states: null,
    &#x2F;**
     * A CSS selctor for an element to be used as a content source.
     * @property content
     * @type {String}
     * @default null
     *&#x2F;
    content: null,
    &#x2F;**
     * A URL to be used as a content source.
     * @property url
     * @type {String}
     * @default null
     *&#x2F;
    url: null,
    &#x2F;**
     * Set to true if the content should be loaded in an iframe
     * @property frame
     * @type {Boolean}
     * @default false
     *&#x2F;
    frame: false,
    &#x2F;**
     * When true the $element&#x27;s height is set to the content height.
     * @property autoHeight
     * @type {Boolean}
     * @default false
     *&#x2F;
    autoHeight: false,
    &#x2F;**
     * When true the $element&#x27;s width is set to the content width.
     * @property autoWidth
     * @type {Boolean}
     * @default false
     *&#x2F;
    autoWidth: false,
    &#x2F;**
     * A selector that specifies a target within the Container to inject content.
     * @property target
     * @type {String}
     * @default null
     *&#x2F;
    target: null
  };

  return {
    &#x2F;**
     * Constructor
     * @method init
     * @public
     * @param {Object} $element JQuery object for the element wrapped by
     * the component
     * @param {Object} settings Configuration settings
     *&#x2F;
    init: function( $element, settings ){
      &#x2F;**
       * Instance of Container
       * @property Container
       * @type Object
       * @private
       *&#x2F;
      var self = this,
        &#x2F;**
         * The content of the container
         * @property content
         * @type String
         * @private
         *&#x2F;
        content,
        target;

      _.defaults( settings, defaults );

      base.init.call( self, $element, settings );

      &#x2F;**
       * A cache to store the height and width of the $element
       * @property cache
       * @type Object
       * @public
       *&#x2F;
      self.cache = {};

      &#x2F;**
       * A jquery object to inject content into
       * @property target
       * @type {Object}
       * @public
       *&#x2F;
      self.$target = null;

      target = settings.target;

      if( target ){
        self.$target = $element.find( target );
      } else {
        self.$target = $element;
      }

      &#x2F;**
       * Loads content and then triggers an update event. Called on load event.
       * @method load
       * @private
       * @param {Object} $target Jquery object for the event target 
       * @param {String|Object} source The source to load or obtain a URL from, or the selector or node to use for local content
       * @param {String} method the method to be used when inserting content
       * @return {Object} Container
       *&#x2F;
      function load( $target, source, method ){

        var isUrl,
          newContent,
          tmpData,
          url;

        self.removeState( constants.states.LOADED ).addState( constants.states.LOADING );
        
        source = source || settings.content;
        isUrl = helpers.isUrl( source );

        if (!isUrl){
          if (typeof source === &quot;string&quot;) {
            url = source;
          }
          else if ($target.is(&#x27;a&#x27;)){
            url = $target.attr(&#x27;href&#x27;);
          }
          else if (settings.url) {
            url = settings.url;
          }
        }

        &#x2F;&#x2F; Is the url really an ID selector?
        if( url.indexOf( &#x27;#&#x27; ) === 0 ){
          newContent = $( url ).html();
          if (newContent) {
            &#x2F;&#x2F; self here is HTMLDivElement
            self.removeState( constants.states.LOADING ).addState( constants.states.LOADED );
            self.trigger( constants.events.UPDATE, {
              sender: self, 
              content: newContent, 
              method: method
            } );            
          }
          return self;
        }
        else if( settings.iframe === true || method === &#x27;iframe&#x27;){
          newContent = &#x27;&lt;iframe src=&quot;&#x27; + url + &#x27;&quot;&gt;&lt;&#x2F;iframe&gt;&#x27;;
          self.removeState( constants.states.LOADING ).addState( constants.states.LOADED );
          self.trigger( constants.events.UPDATE, {
            sender: self, 
            content: newContent, 
            method: &#x27;iframe&#x27;
          } );
          return self;
        }

        &#x2F;&#x2F; If we&#x27;re not grabbing local content nor using an iframe, then perform an ajax call
         
        $.ajax( {
          url: url,
          success: function( data, textStatus, jXHR ){
            var newContent,
              anchor = helpers.parseUri( url ).anchor;

            if( anchor ){
              newContent = $( data ).find( &#x27;#&#x27; + anchor ).html() || data;
            } else {
              newContent = data;
            }

            self.removeState( constants.states.LOADING ).addState( constants.states.LOADED );
            
            &#x2F;&#x2F; self here is HTMLDivElement
            self.trigger( constants.events.UPDATE, {
              sender: self, 
              content: newContent, 
              method: null
            } );
          },
          failure: function(){
           self.removeState( constants.states.LOADING ).addState( constants.states.ERRED );
          }
        } );

        return self;
      }

      &#x2F;*
       * Updates content on an update event
       * @method update
       * @private
       * @param {Object} $target Jquery object for the target node
       * @param {String} updateContent The content to set
       * @param {String} method The method to use for setting the content.
       * This can specified as &#x27;prepend&#x27; or &#x27;append&#x27;. If theese are not
       * specified the content is replaced.
       * @return {Function} Container.setState
       *&#x2F;
      function update( $target, updateContent, method ){
        switch( method ){
          case &#x27;append&#x27;:
            self.appendContent( updateContent );
            break;
          case &#x27;prepend&#x27;:
            self.prependContent( updateContent );
            break;
          default:
            self.setContent( updateContent );
            break;
        }
      }

      &#x2F;**
       * Returns the contents of the Container
       * @method getContent
       * @public
       * @return {Array} contents
       *&#x2F;
      self.getContent = function(){
        return content;
      };

      &#x2F;**
       * Sets the content of the Container replacing current content
       * @method setContent
       * param {String} value The content to set.
       * @public
       * @return {Object} Container
       *&#x2F;
      self.setContent = function( value ){
        content = value;

        self.$target.html( content );

        if( settings.autoHeight ){
          delete this.cache.height;
          self.setHeight( this.getHeight() );
        }

        if( settings.autoWidth ){
          delete this.cache.width;
          self.setWidth( this.getWidth() );
        }

        self.trigger( constants.events.UPDATED, {
          sender: self
        } );

        return self;
      };

      &#x2F;**
       * Appends content to the Container
       * @method appendContent
       * param {String} value The content to append.
       * @public
       * @return {Function} Container.setContent
       *&#x2F;
      self.appendContent = function( value ){
        self.setContent( content + value );
        return self;
      };

      &#x2F;**
       * Prepend content to the Container
       * @method prepend Content
       * param {String} value The content to prepend.
       * @public
       * @return {Function} self.setContent
       *&#x2F;
      self.prependContent = function( value ){
        return self.setContent( value + content );
      };

      if( settings.url ){
        &#x2F;&#x2F; Load content from url
        self.trigger( constants.events.LOAD, {
            sender: self
          } );
      } else {
        &#x2F;&#x2F; Store the $elements content
        content = $element.html();
      }

      &#x2F;&#x2F; Sets the height of the container automagically if autoHeight is set to true.
      if( settings.autoHeight ){
        this.setHeight( this.getHeight() );
      }

      &#x2F;&#x2F; Sets the width of the container automagically if autoHeight is set to true.
      if( settings.autoWidth ){
        self.setWidth( self.getWidth() );
      }

      &#x2F;&#x2F; Bind update event to update
      self.on( constants.events.UPDATE, function(event, payload ) {
        event.stopPropagation();
        payload = payload || {};
        update( $(event.target), payload.content, payload.method );
      });

      &#x2F;&#x2F;Bind load event to load
      self.on( constants.events.LOAD, function(event, payload ) {
        event.stopPropagation();
        payload = payload || {};
        load( $(event.target), payload.content, payload.method );
      });
      
    },
    &#x2F;**
     * Returns the computed height of the Container; result has no units
     * @method getHeight
     * @public
     * @return {Integer} Computed height of the Container (result drops units)
     *&#x2F;
    getHeight: function(){
      var height = this.cache.height,
          $target = this.$target;

      if( !height ){
        if( $target ){
          height = $target.height();
        } else {
          height = this.$element.height();
        }
        this.cache.height = height;
      }
      return height;
    },
    &#x2F;**
     * Sets the height of the Container.
     * @method setHeight
     * @param {Integer} value The height in pixels to set
     * @public
     * @return {Object} Container
     *&#x2F;
    setHeight: function( value ){
      var $target = this.$target;

      this.cache.height = value;
      if( $target ){
        $target.height( value );
      } else {
        this.$element.height( value );
      }
      return this;
    },
    &#x2F;**
     * Returns the computed width of the Container; result has no units
     * @method getHeight
     * @public
     * @return {Integer} Computed height of the Container (result drops units)
     *&#x2F;
    getWidth: function(){
      var width = this.cache.width,
          $target = this.$target;

      if( !width ) {
        if( $target ){
          width = $target.width();
        } else {
          width = this.$element.width();
        }
        this.cache.width = width;
      }
      return width;
    },
    &#x2F;**
     * Sets the width of the Container
     * @method setWidth
     * @param {Integer} value The width in pixels to set
     * @public
     * @return {Object} Container
     *&#x2F;
    setWidth: function( value ){
      var $target = this.$target;

      this.cache.width = value;
      if( $target ){
        $target.width( value );
      } else {
        this.$element.width( value );
      }
      return this;
    }
  };
} );



&#x2F;&#x2F;Export to Common JS Loader
if( typeof module !== &#x27;undefined&#x27; ){
  if( typeof module.setExports === &#x27;function&#x27; ){
    module.setExports( Container );
  } else if( module.exports ){
   module.exports = Container;
  }
}
    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="..&#x2F;assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="..&#x2F;assets/js/yui-prettify.js"></script>
<script src="..&#x2F;assets/../api.js"></script>
<script src="..&#x2F;assets/js/api-filter.js"></script>
<script src="..&#x2F;assets/js/api-list.js"></script>
<script src="..&#x2F;assets/js/api-search.js"></script>
<script src="..&#x2F;assets/js/apidocs.js"></script>
</body>
</html>
