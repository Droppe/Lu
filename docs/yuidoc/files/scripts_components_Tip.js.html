<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>scripts&#x2F;components&#x2F;Tip.js - The Lu Component API</title>
    <link rel="stylesheet" href="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;3.7.0&#x2F;build&#x2F;cssgrids&#x2F;cssgrids-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="..&#x2F;assets/favicon.png">
    <script src="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;combo?3.7.0&#x2F;build&#x2F;yui&#x2F;yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="http:&#x2F;&#x2F;use.lu&#x2F;images&#x2F;logo.png" title="The Lu Component API"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 0.3.x</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="..&#x2F;classes/aboveDecorator.html">aboveDecorator</a></li>
            
                <li><a href="..&#x2F;classes/Abstract.html">Abstract</a></li>
            
                <li><a href="..&#x2F;classes/belowDecorator.html">belowDecorator</a></li>
            
                <li><a href="..&#x2F;classes/Button.html">Button</a></li>
            
                <li><a href="..&#x2F;classes/Carousel.html">Carousel</a></li>
            
                <li><a href="..&#x2F;classes/Container.html">Container</a></li>
            
                <li><a href="..&#x2F;classes/DefaultDecorator.html">DefaultDecorator</a></li>
            
                <li><a href="..&#x2F;classes/Dropdown.html">Dropdown</a></li>
            
                <li><a href="..&#x2F;classes/firstDecorator.html">firstDecorator</a></li>
            
                <li><a href="..&#x2F;classes/FormElement.html">FormElement</a></li>
            
                <li><a href="..&#x2F;classes/genericStateDecorator.html">genericStateDecorator</a></li>
            
                <li><a href="..&#x2F;classes/lastDecorator.html">lastDecorator</a></li>
            
                <li><a href="..&#x2F;classes/leftDecorator.html">leftDecorator</a></li>
            
                <li><a href="..&#x2F;classes/List.html">List</a></li>
            
                <li><a href="..&#x2F;classes/loadDecorator.html">loadDecorator</a></li>
            
                <li><a href="..&#x2F;classes/Lu.html">Lu</a></li>
            
                <li><a href="..&#x2F;classes/Mapper.html">Mapper</a></li>
            
                <li><a href="..&#x2F;classes/nextDecorator.html">nextDecorator</a></li>
            
                <li><a href="..&#x2F;classes/pauseDecorator.html">pauseDecorator</a></li>
            
                <li><a href="..&#x2F;classes/Placeholder.html">Placeholder</a></li>
            
                <li><a href="..&#x2F;classes/playDecorator.html">playDecorator</a></li>
            
                <li><a href="..&#x2F;classes/previousDecorator.html">previousDecorator</a></li>
            
                <li><a href="..&#x2F;classes/rightDecorator.html">rightDecorator</a></li>
            
                <li><a href="..&#x2F;classes/selectDecorator.html">selectDecorator</a></li>
            
                <li><a href="..&#x2F;classes/stateDecorator.html">stateDecorator</a></li>
            
                <li><a href="..&#x2F;classes/Switch.html">Switch</a></li>
            
                <li><a href="..&#x2F;classes/Tip.html">Tip</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="..&#x2F;modules/Button.html">Button</a></li>
            
                <li><a href="..&#x2F;modules/Lu.html">Lu</a></li>
            
                <li><a href="..&#x2F;modules/Tip.html">Tip</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: scripts&#x2F;components&#x2F;Tip.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
&#x2F;**
 * Tooltip class
 * @class Tip
 * @constructor
 * @extends Abstract
 * @require Container
 * @version 0.1.4
 * @submodule Tip
 *&#x2F;

var constants = require( &#x27;lu&#x2F;constants&#x27; ),
  helpers = require( &#x27;lu&#x2F;helpers&#x27; ),
  Abstract = require( &#x27;lu&#x2F;Abstract&#x27; ),
  Container = require( &#x27;lu&#x2F;Container&#x27; ),
  Fiber = require( &#x27;Fiber&#x27; ),
  Tip;

Tip = Abstract.extend( function (Abstract){

  &#x2F;&#x2F; === STATIC VARIABLES ===
  var CLASS = &#x27;class&#x27;,
      TRUE = true,
      FALSE = false,
      root = &#x27;lu&#x2F;Tip&#x2F;decorators&#x2F;&#x27;,
      decorators = {
        above: root + &#x27;above&#x27;,
        below: root + &#x27;below&#x27;,
        left: root + &#x27;left&#x27;,
        right: root + &#x27;right&#x27;
      },
      &#x2F;**
       * Default configuration values for all Tip instances
       * @property defaults
       * @type Object
       * @private
       * @final
       *&#x2F;
      defaults = {

        &#x2F;**
         * The time in milliseconds before before the Tip hides after the user has stopped interacting with it.
         * @property delay
         * @type Number
         * @private
         *&#x2F;
        delay: 300,

        &#x2F;**
         * The placement of the tip. Valid options are &quot;above&quot;&#x2F;&quot;below&quot;&#x2F;&quot;right&#x2F;&quot;left&quot;
         * @property placement
         * @type String
         * @private
         * @default right
         *&#x2F;
        placement: &#x27;right&#x27;,

        &#x2F;**
         * The number of pixels from the top of the element the tip will be positioned at.
         * @property offsetTop
         * @type Number
         * @private
         *&#x2F;
        offsetTop: 0,

        &#x2F;**
         * The number of pixels from the left of the element the tip will be positioned at.
         * @property offsetTop
         * @type Number
         * @private
         *&#x2F;
        offsetLeft: 0,

        &#x2F;**
         * An underscore template to be used in generating the tip. (see: http:&#x2F;&#x2F;documentcloud.github.com&#x2F;underscore&#x2F;)
         * @property template
         * @type String
         * @private
         *&#x2F;
        template: _.template(&#x27;&lt;div class=&quot;&lt;%= className %&gt;&quot; role=&quot;tooltip&quot; tabindex=&quot;-1&quot;&gt;&lt;!-- CONTENT PLACEHOLDER --&gt;&lt;&#x2F;div&gt;&#x27;),

        &#x2F;**
         * Class name to be applied to tooltips outermost div
         * @property className
         * @type String
         * @private
         *&#x2F;
        className: &#x27;tooltip&#x27;,

        &#x2F;**
         * CSS styles for the Tip
         * @property style
         * @type String
         * @private
         *&#x2F;
        style: &#x27;&#x27;,

        &#x2F;**
         * If set to true the tip will remain open until the mouse has left the tip.
         * @property interactive
         * @type Boolean
         * @private
         * @default true
         *&#x2F;
        interactive: TRUE,

        &#x2F;**
         * The buffer in pixels around the element to be used in determing if the user has stopped
         * interacting with the tip
         * @property threshold
         * @type Number
         * @private
         * @default 10
         *&#x2F;
        threshold: 10
      };

  return {

    init: function ( $element, settings ){

      &#x2F;&#x2F; === INSTANCE VARIABLES ===
      var self = this,

        &#x2F;**
         * An indicator of whether or not the tip has been rendered.
         * @property rendered
         * @type Boolean
         * @private
         *&#x2F;
        rendered = FALSE,

        &#x2F;**
         * A jQuery collection that references the document.
         * @property $document
         * @type jQuery Object
         * @private
         *&#x2F;
        $document = $( document ),

        &#x2F;**
         * A jQuery collection that references the tip node.
         * @property $tip
         * @type jQuery Object
         * @private
         *&#x2F;
        $tip,

        &#x2F;**
         * A reference to the tip&#x27;s Container instance.
         * @property TipContainer
         * @type Object
         * @private
         *&#x2F;
        TipContainer,

        &#x2F;**
         * A URL from the Tip&#x27;s anchor tag
         * @property href
         * @type String
         * @private
         *&#x2F;
        href,

        &#x2F;**
         * An indicator of whether or not the tip should remain open
         * @property stuck
         * @type Boolean
         * @private
         *&#x2F;
        stuck,

        &#x2F;**
         * Whether the element is an input or not
         * @property isInput
         * @type Boolean
         * @private
         *&#x2F;
        isInput = ($element[0].tagName.toLowerCase() === &#x27;input&#x27;),

        &#x2F;**
         * Array of decorators to apply to a Tip instance
         * @property requirements
         * @type Array
         * @private
         *&#x2F;
        requirements = [],
        decorator;


      &#x2F;&#x2F; === INITIALIZE ===
      _.defaults( settings, defaults );
      Abstract.init.call( this, $element, settings );
      href = settings.url || $element.attr( &#x27;href&#x27; );
      $tip = $(settings.template({ className: settings.className }));

      &#x2F;**
       * Transfer the styles from the target to the tip if style is not specified
       * @method styleTip
       * @public
       * @return {Void}
       *&#x2F;
      function styleTip() {
        var placement = settings.placement,
          style = settings.style;
          
        if( placement &amp;&amp; style ){
          $tip.addClass( placement + &#x27; &#x27; + style );
        } else {
          if( $element.attr( CLASS ) ){
            $tip.addClass( placement + &#x27; &#x27; + $element.attr( CLASS ) );
          } else {
            $tip.addClass( placement );
          }
        }
      }

      styleTip();

      TipContainer = new Container( $tip, {
        frame: settings.frame,
        notify: $element
      });

      &#x2F;&#x2F; === PRIVATE ===
      &#x2F;**
       * Appends the Tip to the body
       * @method append
       * @private
       * @return {Void}
       *&#x2F;
      function append() {
        $( &#x27;body&#x27; ).append( $tip );
      }

      &#x2F;**
       * Function to run on mouseenter. Must be named so we can pass it specifically to jQuery&#x27;s off.
       * @private
       * @method handleMouseEnter
       * @param {Objct} event jQuery event object
       * @return {Void}
       *&#x2F;
      function handleMouseEnter ( event ){
        event.stopPropagation();

        &#x2F;&#x2F;set up a listener on the document to be used in determing if the user has moused out of the threshold
        $document.on( &#x27;mousemove.lu.tip&#x27;, handleMouseMove );
        self.show();
      }

      &#x2F;**
       * Function to run on mousemove.
       * @private
       * @method handleMouseMove
       * @param {Objct} event jQuery event object
       * @return {Void}
       *&#x2F;
      function handleMouseMove ( event ){
        event.stopPropagation();
        var pageX = event.pageX || 0,
          pageY = event.pageY || 0,
          elLeft = $element.offset().left,
          elTop = $element.offset().top,
          elWidth = $element.outerWidth(),
          elHeight = $element.outerHeight(),
          tipLeft = $tip.offset().left,
          tipTop = $tip.offset().top,
          tipWidth = $tip.outerWidth(),
          tipHeight = $tip.outerHeight();

        &#x2F;**
         * Returns true if the mouse is outside the threshold area
         * @private
         * @method isMouseOutside
         *&#x2F;
        function isMouseOutside(){
          var outLeft  = (pageX &lt; (elLeft - settings.threshold - settings.offsetLeft)) &amp;&amp; (pageX &lt; (tipLeft - settings.threshold - settings.offsetLeft)),
              outRight = (pageX &gt; (elLeft + elWidth + settings.threshold + settings.offsetLeft)) &amp;&amp; (pageX &gt; (tipLeft + tipWidth + settings.threshold + settings.offsetLeft)),
              outAbove = (pageY &lt; (elTop - settings.threshold - settings.offsetTop)) &amp;&amp; (pageY &lt; (tipTop - settings.threshold - settings.offsetTop)),
              outBelow = (pageY &gt; (elTop + elHeight + settings.threshold + settings.offsetTop)) &amp;&amp; (pageY &gt; (tipTop + tipHeight + settings.threshold + settings.offsetTop));

          return ( ( outLeft || outRight ) || ( outAbove || outBelow ) );
        }

        if( isMouseOutside() ){
          $document.off( &#x27;mouseenter&#x27;, handleMouseEnter );
          $document.off( &#x27;mousemove.lu.tip&#x27;, handleMouseMove );
          self.hide();
        }
      }

      &#x2F;**
       * Function to run on focus.
       * @private
       * @method handleFocus
       * @param {Objct} event jQuery event object
       * @return {Void}
       *&#x2F;
      function handleFocus( event ){
        event.stopPropagation();

        $element.on( &#x27;blur.lu.tip&#x27;, function( event ){
          event.stopPropagation();
          $element.off( &#x27;blur.lu.tip&#x27; );
          self.hide();
        } );

        self.show();
      }

      &#x2F;&#x2F; === PUBLIC ===
      this.$tip = $tip;

      &#x2F;**
       * Show the tip
       * @method show
       * @return {Void}
       *&#x2F;
      this.show = function(){
        if( rendered === FALSE ){
          TipContainer.trigger( &#x27;load&#x27;, [href] );
        } else {
          $tip.css( self.getPosition() );
          $tip.show();
          &#x2F;&#x2F; use setting focus on active tip to enforce one tip at a time
          if( !isInput ) {
            $tip.focus();
          }
        }
      };

      &#x2F;**
       * Hide the tip
       * @method hide
       * @return {Void}
       *&#x2F;
      this.hide = function(){
        var timeout;
        if( rendered === TRUE ){
          timeout = window.setTimeout( function(){
            if( !stuck || !settings.interactive ){
              $tip.hide();
              window.clearTimeout( timeout );
            }
          }, settings.delay );
        }
      };

      &#x2F;**
       * Gets the position of the tip
       * @method getPosition
       * @return {Object} position And object containing a top and left
       * @private
       *&#x2F;
      this.getPosition = function(){
        var elOffset = $element.offset(),
          elHeight = $element.outerHeight(),
          elWidth = $element.outerWidth();

        return self.calcPosition( elOffset, elHeight, elWidth, settings );
      };

      &#x2F;&#x2F; === LU EVENT LISTENERS ===
      this.on( constants.events.SHOW, function( event ){
        event.stopPropagation();
        self.show();
      } );

      this.on( constants.events.HIDE, function( event ){
        event.stopPropagation();
        self.hide();
      } );

      &#x2F;&#x2F; Append tip to DOM after container is updated (loaded)
      TipContainer.on( constants.events.UPDATED, function(event) {
        event.stopPropagation();
        append();
        rendered = TRUE;
        self.trigger( constants.events.SHOW, [self] );
      } );

      &#x2F;&#x2F; === DOM EVENT LISTENERS ===
      if( !isInput ) {
        $element.on( &#x27;mouseenter&#x27;, handleMouseEnter );
      } else {
        $element.on( &#x27;focus&#x27;, handleFocus );
      }
      &#x2F;&#x2F; use losing focus on tip to enforce one tip at a time
      $tip.on( &#x27;blur&#x27;, self.hide );

      &#x2F;&#x2F; === DECORATION ===
      switch( settings.placement ){
        case &#x27;Above&#x27;:
          requirements.push( decorators.above );
          break;
        case &#x27;Below&#x27;:
          requirements.push( decorators.below );
          break;
        case &#x27;Left&#x27;:
          requirements.push( decorators.left );
          break;
        case &#x27;Right&#x27;:
          requirements.push( decorators.right );
          break;
        default:
          requirements.push( decorators.right );
      }

      require.ensure( requirements, function( require, module, exports ){
        _.each( requirements, function( decorator, index ){
          decorator = require( decorator )( settings );
          Fiber.decorate( self, decorator );
        } );
        self.trigger( &#x27;dependencies-resolved&#x27; );
      } );

    }
  };

});

&#x2F;&#x2F; Export to Common JS Loader
if( typeof module !== &#x27;undefined&#x27; ){
  if( typeof module.setExports === &#x27;function&#x27; ){
    module.setExports( Tip );
  } else if( module.exports ){
   module.exports = Tip;
  }
}

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="..&#x2F;assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="..&#x2F;assets/js/yui-prettify.js"></script>
<script src="..&#x2F;assets/../api.js"></script>
<script src="..&#x2F;assets/js/api-filter.js"></script>
<script src="..&#x2F;assets/js/api-list.js"></script>
<script src="..&#x2F;assets/js/api-search.js"></script>
<script src="..&#x2F;assets/js/apidocs.js"></script>
</body>
</html>
