<a id="tip-test" href="http://www.google.com" data-lu="Tip" data-lu-config="{Tip: {
  delay: '0',
  placement: 'right'
}}" title="Search using Google">Search</a>

<script>

  function run(){
    var $tip = $( '#tip-test' ),
      Tip;

    Tip = lu.getControl( $tip );

    module( 'API Tests', {} );

    test( 'show', function() {
      expect( 1 );
      Tip.show();
      ok( ($("div.tip").size() === 1), "Tip found in DOM." );
    } );

    test('hide', function() {

      var deferredA = $.Deferred();

      setTimeout(function() {
        ok( ($("div.tip").size() === 0), "No tip found in DOM." );
        deferredA.resolve();
      }, 200);

      $.when(deferredA).done(function() {
        start();
      });

    });    

    module( 'Event Tests', {} );

// mouseenter, focus, hide, show

    test( 'mouseenter', function(){
      expect( 1 );
      Tip.trigger('mouseenter');
      ok( ($("div.tip").size() === 1), "Tip found in DOM." );
    } );

    test( 'focus', function(){
      expect( 1 );
      Tip.trigger('focus');
      ok( ($("div.tip").size() === 1), "Tip found in DOM." );
    } );

    test( 'show', function(){
      expect( 1 );
      Tip.trigger('show');
      ok( ($("div.tip").size() === 1), "Tip found in DOM." );
    } );

    test( 'hide', function(){
      //expect( 1 );
      Tip.trigger('hide');

      var deferredA = $.Deferred();

      setTimeout(function() {
        ok( ($("div.tip").size() === 0), "No tip found in DOM." );
        deferredA.resolve();
      }, 200);

      $.when(deferredA).done(function() {
        start();
      });

    } );

  }

</script>